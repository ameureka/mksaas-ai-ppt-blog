# QA 方法论快速执行指南

> **5 步快速上手 QA-DCU 方法论**

---

## 🎯 方法论核心

**QA-DCU (QA-Driven Codebase Understanding)** = 通过结构化问答快速理解项目

- ⏱️ **效率提升 85%** - 从 2 周到 2 天理解项目
- 📚 **系统化知识** - 不再是碎片化的个人笔记
- 🤖 **AI 辅助** - 让 AI 帮你读代码
- 🔄 **持续更新** - 文档随代码演进

---

## 📋 执行 5 步法

### 步骤 1：设计问题清单（30 分钟）

根据项目类型选择问题模板：

**SaaS 应用标准问题（14 个核心问题）**：

```markdown
1. 核心架构是什么样的？使用了哪些技术栈？
2. 博客/内容如何更新和管理？
3. 部署架构是怎样的？
4. Markdown 格式和 SEO 如何处理？
5. SEO 优化策略有哪些？
6. 流量监测如何实现？
7. 广告位如何设计？
8. 从其他平台迁移需要注意什么？
9. 用户点评和营销系统如何设计？
10. 站点风格和迁移原则是什么？
11. 数据库结构如何设计？
12. 如何管理大量文章（如 1000 篇）？
13. 数据库容量和费用如何估算？
14. 图片视频上传有哪些限制？
```

**系统化扩展问题（20 个）**：

```markdown
【系统架构类】
- QA-1.0: 项目技术选型（技术栈、依赖版本）
- QA-2.0: 技术栈约束条件（为什么选这些技术）
- QA-3.0: 系统架构和数据模型（架构图、ER 图）
- QA-4.0: 核心能力（核心功能清单）

【API 与数据类】
- QA-5.0: API 设计和数据模型
- QA-6.0: 部署策略
- QA-7.0: 异步任务实现模式
- QA-8.0: 数据库详细信息

【业务功能类】
- QA-9.0: 收益模式
- QA-10.0: 对象存储
- QA-11.0: 可观测性
- QA-12.0: 安全性设计
- QA-13.0: 性能要求
- QA-14.0: LLM API 使用和限流
- QA-15.0: 支付系统设计
- QA-16.0: 国际化支持

【前端与 UX 类】
- QA-17.0: 核心业务逻辑
- QA-18.0: 前端风格和迁移原则
- QA-19.0: 核心功能用户故事
- QA-20.0: 综合评估
```

**创建文件**：
```bash
# 创建 QA 目录
mkdir -p QA

# 创建问题列表
touch QA/QAquestion.md
```

---

### 步骤 2：AI 批量回答（2-4 小时）

**推荐工具**：Claude Code、Cursor、ChatGPT

**提示词模板**：

```markdown
你是一个资深软件架构师。我需要你分析这个项目的代码库，回答以下问题清单。

【项目类型】：Next.js 15 SaaS 应用
【技术栈】：TypeScript, React, Drizzle ORM, PostgreSQL, Better Auth, Stripe

【问题清单】：
[粘贴 QAquestion.md 的内容]

【输出要求】：
1. 为每个问题创建独立的 Markdown 文档
2. 文件命名：QA-X.0-问题简述.md
3. 包含以下部分：
   - 简要回答（50-100 字概括）
   - 详细说明（分小节解释）
   - 代码示例（完整可运行）
   - 来源标注（**来源**: `file.ts`）
   - 相关文档链接

【格式模板】：
# QA-X.0：[问题标题]

**文档说明**：本文档回答"[原始问题]"
**创建日期**：2025-11-18
**版本**：v1.0

---

## 📋 简要回答

[一段话概括]

---

## 📖 详细说明

### 1. [要点一]

[解释]

**来源**: `path/to/file.ts`

```typescript
// 代码示例
```

---

## 🔗 相关文档

- [QA-Y.0：相关主题](./QA-Y.0-相关主题.md)

---

**最后更新**：2025-11-18
```

**执行方式**：

```bash
# 在 Claude Code 中
1. 打开项目根目录
2. 使用上述提示词
3. 让 AI 逐个创建 QA 文档
4. 保存到 QA/ 目录
```

**注意事项**：
- 不要一次性要求回答所有问题（AI 可能遗漏细节）
- 分批处理：每次 4-5 个问题
- 验证 AI 提供的代码路径是否存在

---

### 步骤 3：人工验证（1-2 小时）

**验证检查清单**：

#### 3.1 内容准确性检查

```bash
# 验证文件路径
grep -r '`src/' QA/*.md | while read line; do
  file=$(echo $line | sed -n "s/.*\`\([^:]*\).*/\1/p")
  if [ ! -f "$file" ]; then
    echo "❌ 文件不存在: $file"
  fi
done

# 验证版本号
grep -h '"[^"]*": "[^"]*"' QA/QA-1.0*.md | while read line; do
  # 与 package.json 对比
done
```

#### 3.2 移除行号引用

**批量处理**：
```bash
cd QA

# 移除所有行号引用（如 `file.ts:42` → `file.ts`）
for file in QA-*.md; do
  sed -i 's/`\([^`]*\):\([0-9-]*\)`/`\1`/g' "$file"
done
```

**手动检查**：
```bash
# 查找剩余的行号引用
grep -n '`[^`]*:[0-9]' QA/*.md
```

#### 3.3 统一格式

- [ ] 标题层级一致（# → ## → ###）
- [ ] 代码块有语言标注（\`\`\`typescript）
- [ ] 列表格式统一（- 或 1.）
- [ ] 术语统一（如 Server Action vs server action）

---

### 步骤 4：建立验证机制（1 小时）

#### 4.1 创建验证日志

```bash
touch QA/QA-validation-plan-and-log.md
```

**模板内容**：
```markdown
# QA 文档校验计划与记录

## 📊 校验记录表

| 文件路径 | 阶段 | 校验日期 | 发现的问题 | 修改说明 | 状态 |
|---------|------|---------|-----------|---------|------|
| QA-1.0-项目技术选型.md | Phase 2 | 2025-11-18 | 版本号验证 | 已验证所有版本准确 | ✅ |
| QA-2.0-技术栈约束条件.md | Phase 2 | 2025-11-18 | 行号引用 | 已移除 | ✅ |
...

## 📈 进度追踪

- **总文档数**：35
- **已完成**：0
- **完成率**：0%

## 🔧 校验标准

### 1. 内容准确性
- [ ] 代码路径存在且正确
- [ ] 版本号与 package.json 一致
...

### 2. 文档质量
- [ ] 无拼写错误
- [ ] 格式统一
...
```

#### 4.2 关键参考文件清单

在每次验证时对照：

```markdown
## 📂 关键参考文件

**依赖与版本**：
- `package.json` - 所有依赖版本
- `pnpm-lock.yaml` - 锁定版本

**数据库与模型**：
- `src/db/schema.ts` - 数据库 Schema
- `drizzle.config.ts` - 数据库配置

**API 与路由**：
- `src/app/api/` - API Routes
- `src/actions/` - Server Actions

**配置与环境**：
- `src/config/website.tsx` - 应用配置
- `env.example` - 环境变量
- `next.config.ts` - Next.js 配置
```

#### 4.3 阶段化验证

将文档分为 6 个阶段验证：

```markdown
- Phase 1: 元文档（3 个）
- Phase 2: 系统架构类（4 个）
- Phase 3: API 与数据模型类（4 个）
- Phase 4: 业务功能类（8 个）
- Phase 5: 前端与 UX 类（4 个）
- Phase 6: 业务场景类（14 个）
```

---

### 步骤 5：提交与维护（30 分钟）

#### 5.1 提交到 Git

```bash
# 添加所有 QA 文档
git add QA/

# 提交
git commit -m "docs(qa): 初始化 QA 文档体系

- 创建 35 个结构化 QA 文档
- 涵盖系统架构、API、业务功能、前端 UX
- 建立验证机制和维护计划"

# 推送
git push origin <your-branch>
```

#### 5.2 创建索引文档

```bash
touch QA/README.md
```

**内容**：
```markdown
# QA 文档索引

## 🚀 快速开始

**新成员推荐阅读顺序**：
1. [总结.md](./总结.md) - 项目概况
2. [QA-1.0：技术选型](./QA-1.0-项目技术选型.md) - 技术栈
3. [QA-3.0：系统架构](./QA-3.0-系统架构和数据模型.md) - 架构图
4. [QA-17.0：核心业务逻辑](./QA-17.0-核心业务逻辑.md) - 业务流程

## 📂 文档分类

### 🏗️ 系统架构 (4 个)
- [QA-1.0：项目技术选型](./QA-1.0-项目技术选型.md)
- [QA-2.0：技术栈约束条件](./QA-2.0-技术栈约束条件.md)
- [QA-3.0：系统架构和数据模型](./QA-3.0-系统架构和数据模型.md)
- [QA-4.0：核心能力](./QA-4.0-核心能力.md)

[...]
```

#### 5.3 定期维护计划

| 触发条件 | 验证范围 | 操作 |
|---------|---------|-----|
| **依赖升级** | QA-1.0, QA-2.0 | 更新版本号 |
| **数据库迁移** | QA-3.0, QA-8.0 | 更新 Schema |
| **新功能上线** | 相关 QA 文档 | 补充新功能 |
| **重大重构** | 相关模块文档 | 全面验证 |
| **每季度** | 全部文档 | 全量审查 |

---

## 📊 成果验收

### 完成标准

- [ ] ✅ 创建了 30+ 个 QA 文档
- [ ] ✅ 所有文档格式统一
- [ ] ✅ 移除了所有行号引用
- [ ] ✅ 验证了关键信息准确性
- [ ] ✅ 建立了验证日志
- [ ] ✅ 提交到版本控制
- [ ] ✅ 创建了索引文档

### 效果评估

**量化指标**：
- ⏱️ 新成员 Onboarding 时间：__ 天 → __ 天
- 📚 文档覆盖率：__%
- ✅ 验证通过率：__%

**团队反馈**：
- 是否减少了重复性问题？
- 新成员是否能快速理解项目？
- 文档是否易于维护？

---

## 🛠️ 常用命令

```bash
# 创建 QA 目录
mkdir -p QA

# 查找所有 QA 文档
ls QA/QA-*.md

# 统计文档数量
ls QA/QA-*.md | wc -l

# 搜索特定主题
grep -r "支付" QA/

# 查找死链接
grep -r '](\./' QA/ | while read line; do
  # 验证链接
done

# 统计总字数
cat QA/*.md | wc -w
```

---

## 📚 扩展阅读

- [QA-METHODOLOGY.md](./QA-METHODOLOGY.md) - 完整方法论文档
- [QA-validation-plan-and-log.md](./QA-validation-plan-and-log.md) - 验证计划
- [mksaas-blog 项目 QA 示例](https://github.com/yourusername/mksaas-blog/tree/main/QA)

---

## 🆘 常见问题

**Q: 如何选择合适的问题？**
A: 基于项目类型和团队需求，参考标准问题模板，聚焦核心业务和技术决策。

**Q: AI 回答不准确怎么办？**
A: 必须人工验证！对照实际代码、运行示例、检查版本号。AI 只是辅助，不是终点。

**Q: 文档如何保持更新？**
A: 建立定期验证机制，每次重大变更时更新相关文档，每季度全量审查。

**Q: 多人协作如何避免冲突？**
A: 使用 Git，明确文档所有者，建立 PR review 流程。

---

**文档版本**：v1.0
**创建日期**：2025-11-18
**适用项目**：所有软件项目
**估计耗时**：半天到一天

---

## 🎯 立即开始

```bash
# 1. 克隆模板
git clone https://github.com/yourusername/qa-methodology-template.git
cd qa-methodology-template

# 2. 复制到你的项目
cp -r QA /path/to/your/project/

# 3. 开始设计问题
vim /path/to/your/project/QA/QAquestion.md

# 4. 使用 AI 生成回答
# 在 Claude Code 中打开项目，使用提示词模板

# 5. 验证和提交
cd /path/to/your/project
pnpm qa:validate  # 如果配置了验证脚本
git add QA/
git commit -m "docs(qa): 初始化 QA 文档"
```

**祝你成功！** 🎉

如有问题，欢迎提 Issue 或 PR。
