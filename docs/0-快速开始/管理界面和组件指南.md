# ğŸ¨ ç®¡ç†ç•Œé¢å’Œç»„ä»¶æŒ‡å— | Admin Interface & Components Guide

æœ¬æŒ‡å—å¸®åŠ©ä½ äº†è§£é¡¹ç›®ä¸­ç°æœ‰çš„ç®¡ç†ç•Œé¢ã€å¯ç”¨ç»„ä»¶ï¼Œä»¥åŠå¦‚ä½•å¿«é€Ÿå¼€å‘æ–°åŠŸèƒ½ã€‚

---

## ğŸ“‚ é¡¹ç›®ç»“æ„æ¦‚è§ˆ

### è·¯ç”±ç»“æ„

```
src/app/[locale]/
â”œâ”€â”€ (marketing)/          # è¥é”€é¡µé¢ï¼ˆå…¬å¼€è®¿é—®ï¼‰
â”‚   â”œâ”€â”€ page.tsx         # é¦–é¡µ
â”‚   â”œâ”€â”€ blog/            # åšå®¢
â”‚   â”œâ”€â”€ pricing/         # ä»·æ ¼é¡µé¢
â”‚   â””â”€â”€ about/           # å…³äºé¡µé¢
â”‚
â”œâ”€â”€ (protected)/         # å—ä¿æŠ¤é¡µé¢ï¼ˆéœ€è¦ç™»å½•ï¼‰
â”‚   â”œâ”€â”€ dashboard/       # ç”¨æˆ·ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ settings/        # ç”¨æˆ·è®¾ç½®
â”‚   â”œâ”€â”€ payment/         # æ”¯ä»˜é¡µé¢
â”‚   â””â”€â”€ admin/           # ç®¡ç†å‘˜ç•Œé¢ â­
â”‚       â””â”€â”€ users/       # ç”¨æˆ·ç®¡ç†
â”‚
â”œâ”€â”€ auth/                # è®¤è¯é¡µé¢
â”‚   â”œâ”€â”€ login/          # ç™»å½•
â”‚   â”œâ”€â”€ register/       # æ³¨å†Œ
â”‚   â””â”€â”€ reset-password/ # é‡ç½®å¯†ç 
â”‚
â””â”€â”€ docs/               # æ–‡æ¡£é¡µé¢
```

---

## ğŸ” ç®¡ç†å‘˜ç•Œé¢

### 1. ç”¨æˆ·ç®¡ç†ç•Œé¢

**è·¯å¾„**: `/admin/users`

**åŠŸèƒ½**:
- âœ… æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
- âœ… æœç´¢ç”¨æˆ·ï¼ˆæŒ‰åç§°ã€é‚®ç®±ï¼‰
- âœ… è¿‡æ»¤ç”¨æˆ·ï¼ˆæŒ‰è§’è‰²ã€çŠ¶æ€ï¼‰
- âœ… æ’åºç”¨æˆ·ï¼ˆæŒ‰åˆ›å»ºæ—¶é—´ã€åç§°ç­‰ï¼‰
- âœ… åˆ†é¡µæ˜¾ç¤º
- âœ… æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…
- âœ… å°ç¦/è§£å°ç”¨æˆ·
- âœ… ä¿®æ”¹ç”¨æˆ·è§’è‰²

**è®¿é—®æƒé™**: ä»…ç®¡ç†å‘˜ï¼ˆrole: 'admin'ï¼‰

**æ–‡ä»¶ä½ç½®**:
```
src/app/[locale]/(protected)/admin/users/
â”œâ”€â”€ page.tsx                    # é¡µé¢å…¥å£
â””â”€â”€ layout.tsx                  # å¸ƒå±€

src/components/admin/
â”œâ”€â”€ users-page-client.tsx       # ä¸»è¦å®¢æˆ·ç«¯ç»„ä»¶
â”œâ”€â”€ users-table.tsx             # ç”¨æˆ·è¡¨æ ¼ç»„ä»¶
â””â”€â”€ user-detail-viewer.tsx      # ç”¨æˆ·è¯¦æƒ…æŸ¥çœ‹å™¨
```

---

## ğŸ¨ å¯ç”¨ç»„ä»¶åº“

### 1. UI åŸºç¡€ç»„ä»¶ (`src/components/ui/`)

è¿™äº›æ˜¯åŸºäº Radix UI å’Œ shadcn/ui çš„åŸºç¡€ç»„ä»¶ï¼š

```typescript
// è¡¨å•ç»„ä»¶
- Button              # æŒ‰é’®
- Input               # è¾“å…¥æ¡†
- Textarea            # æ–‡æœ¬åŸŸ
- Select              # ä¸‹æ‹‰é€‰æ‹©
- Checkbox            # å¤é€‰æ¡†
- Radio               # å•é€‰æ¡†
- Switch              # å¼€å…³
- Slider              # æ»‘å—

// æ•°æ®å±•ç¤º
- Table               # è¡¨æ ¼
- Card                # å¡ç‰‡
- Badge               # å¾½ç« 
- Avatar              # å¤´åƒ
- Separator           # åˆ†éš”çº¿
- Progress            # è¿›åº¦æ¡

// åé¦ˆç»„ä»¶
- Alert               # è­¦å‘Šæç¤º
- Toast               # æ¶ˆæ¯æç¤º
- Dialog              # å¯¹è¯æ¡†
- AlertDialog         # ç¡®è®¤å¯¹è¯æ¡†
- Sheet               # ä¾§è¾¹æŠ½å±‰
- Popover             # å¼¹å‡ºæ¡†
- Tooltip             # å·¥å…·æç¤º

// å¯¼èˆªç»„ä»¶
- Tabs                # æ ‡ç­¾é¡µ
- Accordion           # æ‰‹é£ç´
- DropdownMenu        # ä¸‹æ‹‰èœå•
- NavigationMenu      # å¯¼èˆªèœå•
```

### 2. æ•°æ®è¡¨æ ¼ç»„ä»¶ (`src/components/data-table/`)

å¼ºå¤§çš„æ•°æ®è¡¨æ ¼ç³»ç»Ÿï¼ŒåŸºäº TanStack Tableï¼š

**ç‰¹æ€§**:
- âœ… æ’åº
- âœ… è¿‡æ»¤
- âœ… åˆ†é¡µ
- âœ… æœç´¢
- âœ… åˆ—å¯è§æ€§æ§åˆ¶
- âœ… è¡Œé€‰æ‹©
- âœ… å“åº”å¼è®¾è®¡

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { DataTable } from '@/components/data-table/data-table';

<DataTable
  columns={columns}
  data={data}
  searchKey="name"
  filterableColumns={[...]}
  sortableColumns={[...]}
/>
```

### 3. è®¤è¯ç»„ä»¶ (`src/components/auth/`)

```
- LoginForm           # ç™»å½•è¡¨å•
- RegisterForm        # æ³¨å†Œè¡¨å•
- ResetPasswordForm   # é‡ç½®å¯†ç è¡¨å•
- OAuthButtons        # OAuth ç™»å½•æŒ‰é’®
- VerifyEmailCard     # é‚®ç®±éªŒè¯å¡ç‰‡
```

### 4. ä»ªè¡¨æ¿ç»„ä»¶ (`src/components/dashboard/`)

```
- StatsCard           # ç»Ÿè®¡å¡ç‰‡
- RecentActivity      # æœ€è¿‘æ´»åŠ¨
- QuickActions        # å¿«æ·æ“ä½œ
- UsageChart          # ä½¿ç”¨æƒ…å†µå›¾è¡¨
```

### 5. è®¾ç½®ç»„ä»¶ (`src/components/settings/`)

```
settings/
â”œâ”€â”€ profile/          # ä¸ªäººèµ„æ–™è®¾ç½®
â”œâ”€â”€ security/         # å®‰å…¨è®¾ç½®
â”œâ”€â”€ billing/          # è´¦å•è®¾ç½®
â”œâ”€â”€ credits/          # ç§¯åˆ†è®¾ç½®
â””â”€â”€ notifications/    # é€šçŸ¥è®¾ç½®
```

### 6. æ”¯ä»˜ç»„ä»¶ (`src/components/payment/`)

```
- PricingCard         # ä»·æ ¼å¡ç‰‡
- CheckoutForm        # ç»“è´¦è¡¨å•
- PaymentHistory      # æ”¯ä»˜å†å²
- SubscriptionCard    # è®¢é˜…å¡ç‰‡
```

### 7. åŠ¨ç”»ç»„ä»¶

**Magic UI** (`src/components/magicui/`)
- AnimatedBeam       # åŠ¨ç”»å…‰æŸ
- BorderBeam         # è¾¹æ¡†å…‰æŸ
- Particles          # ç²’å­æ•ˆæœ
- ShimmerButton      # é—ªå…‰æŒ‰é’®
- TextReveal         # æ–‡å­—æ­ç¤º

**Animate UI** (`src/components/animate-ui/`)
- FadeIn             # æ·¡å…¥åŠ¨ç”»
- SlideIn            # æ»‘å…¥åŠ¨ç”»
- ScaleIn            # ç¼©æ”¾åŠ¨ç”»

---

## ğŸš€ å¿«é€Ÿå¼€å‘æŒ‡å—

### åœºæ™¯ 1: åˆ›å»ºæ–°çš„ç®¡ç†é¡µé¢

å‡è®¾ä½ æƒ³åˆ›å»ºä¸€ä¸ª"æ–‡ç« ç®¡ç†"é¡µé¢ï¼š

#### Step 1: åˆ›å»ºè·¯ç”±æ–‡ä»¶

```bash
# åˆ›å»ºç›®å½•
mkdir -p src/app/[locale]/(protected)/admin/posts

# åˆ›å»ºé¡µé¢æ–‡ä»¶
touch src/app/[locale]/(protected)/admin/posts/page.tsx
```

#### Step 2: ç¼–å†™é¡µé¢ç»„ä»¶

```typescript
// src/app/[locale]/(protected)/admin/posts/page.tsx
import { PostsPageClient } from '@/components/admin/posts-page-client';

export default function PostsPage() {
  return <PostsPageClient />;
}
```

#### Step 3: åˆ›å»ºå®¢æˆ·ç«¯ç»„ä»¶

```typescript
// src/components/admin/posts-page-client.tsx
'use client';

import { DataTable } from '@/components/data-table/data-table';
import { usePosts } from '@/hooks/use-posts';

export function PostsPageClient() {
  const { data, isLoading } = usePosts();

  const columns = [
    // å®šä¹‰åˆ—...
  ];

  return (
    <div className="container py-10">
      <h1 className="text-3xl font-bold mb-6">æ–‡ç« ç®¡ç†</h1>
      <DataTable
        columns={columns}
        data={data}
        searchKey="title"
      />
    </div>
  );
}
```

---

### åœºæ™¯ 2: æ·»åŠ æ–°çš„è®¾ç½®é¡µé¢

å‡è®¾ä½ æƒ³æ·»åŠ "API å¯†é’¥ç®¡ç†"è®¾ç½®ï¼š

#### Step 1: åˆ›å»ºè·¯ç”±

```bash
mkdir -p src/app/[locale]/(protected)/settings/api-keys
touch src/app/[locale]/(protected)/settings/api-keys/page.tsx
```

#### Step 2: åˆ›å»ºç»„ä»¶

```typescript
// src/components/settings/api-keys/api-keys-card.tsx
'use client';

import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

export function ApiKeysCard() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>API å¯†é’¥</CardTitle>
      </CardHeader>
      <CardContent>
        {/* API å¯†é’¥ç®¡ç†ç•Œé¢ */}
      </CardContent>
    </Card>
  );
}
```

---

### åœºæ™¯ 3: ä½¿ç”¨ç°æœ‰ç»„ä»¶å¿«é€Ÿæ„å»ºè¡¨å•

```typescript
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Card } from '@/components/ui/card';
import { useForm } from 'react-hook-form';

export function QuickForm() {
  const { register, handleSubmit } = useForm();

  return (
    <Card className="p-6">
      <form onSubmit={handleSubmit(onSubmit)}>
        <div className="space-y-4">
          <div>
            <Label htmlFor="name">åç§°</Label>
            <Input
              id="name"
              {...register('name')}
              placeholder="è¾“å…¥åç§°"
            />
          </div>

          <div>
            <Label htmlFor="email">é‚®ç®±</Label>
            <Input
              id="email"
              type="email"
              {...register('email')}
              placeholder="è¾“å…¥é‚®ç®±"
            />
          </div>

          <Button type="submit">æäº¤</Button>
        </div>
      </form>
    </Card>
  );
}
```

---

## ğŸ”‘ å¦‚ä½•è®¿é—®ç®¡ç†ç•Œé¢

### 1. åˆ›å»ºç®¡ç†å‘˜è´¦å·

ç›®å‰æœ‰ä¸¤ç§æ–¹å¼ï¼š

#### æ–¹å¼ A: é€šè¿‡æ•°æ®åº“ç›´æ¥ä¿®æ”¹

```sql
-- è¿æ¥åˆ°æ•°æ®åº“
psql $DATABASE_URL

-- å°†ç”¨æˆ·è§’è‰²æ”¹ä¸º admin
UPDATE "user" SET role = 'admin' WHERE email = 'your-email@example.com';
```

#### æ–¹å¼ B: é€šè¿‡ä»£ç åˆ›å»ºï¼ˆæ¨èï¼‰

åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼š

```typescript
// scripts/create-admin.ts
import { getDb } from '@/db';
import { user } from '@/db/schema';
import { eq } from 'drizzle-orm';

async function createAdmin(email: string) {
  const db = await getDb();

  await db
    .update(user)
    .set({ role: 'admin' })
    .where(eq(user.email, email));

  console.log(`âœ… User ${email} is now an admin`);
}

// ä½¿ç”¨ä½ çš„é‚®ç®±
createAdmin('your-email@example.com');
```

è¿è¡Œè„šæœ¬ï¼š
```bash
tsx scripts/create-admin.ts
```

### 2. è®¿é—®ç®¡ç†ç•Œé¢

1. ç™»å½•ä½ çš„è´¦å·
2. è®¿é—®ï¼š`http://localhost:3005/admin/users`
3. å¦‚æœä¸æ˜¯ç®¡ç†å‘˜ï¼Œä¼šè¢«é‡å®šå‘

---

## ğŸ“Š ç”¨æˆ·ç®¡ç†ç•Œé¢åŠŸèƒ½è¯¦è§£

### åŠŸèƒ½åˆ—è¡¨

#### 1. ç”¨æˆ·åˆ—è¡¨å±•ç¤º
- æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·
- æ¯é¡µ 10/20/50/100 æ¡è®°å½•
- å“åº”å¼è¡¨æ ¼è®¾è®¡

#### 2. æœç´¢åŠŸèƒ½
- æŒ‰åç§°æœç´¢
- æŒ‰é‚®ç®±æœç´¢
- å®æ—¶æœç´¢ï¼ˆè¾“å…¥å³æœç´¢ï¼‰

#### 3. è¿‡æ»¤åŠŸèƒ½
- æŒ‰è§’è‰²è¿‡æ»¤ï¼š
  - Allï¼ˆå…¨éƒ¨ï¼‰
  - Userï¼ˆæ™®é€šç”¨æˆ·ï¼‰
  - Adminï¼ˆç®¡ç†å‘˜ï¼‰
- æŒ‰çŠ¶æ€è¿‡æ»¤ï¼š
  - Allï¼ˆå…¨éƒ¨ï¼‰
  - Activeï¼ˆæ´»è·ƒï¼‰
  - Bannedï¼ˆå·²å°ç¦ï¼‰

#### 4. æ’åºåŠŸèƒ½
å¯æŒ‰ä»¥ä¸‹å­—æ®µæ’åºï¼š
- åç§°ï¼ˆNameï¼‰
- é‚®ç®±ï¼ˆEmailï¼‰
- è§’è‰²ï¼ˆRoleï¼‰
- åˆ›å»ºæ—¶é—´ï¼ˆCreated Atï¼‰
- å®¢æˆ· IDï¼ˆCustomer IDï¼‰
- å°ç¦çŠ¶æ€ï¼ˆBannedï¼‰
- å°ç¦åŸå› ï¼ˆBan Reasonï¼‰
- å°ç¦åˆ°æœŸæ—¶é—´ï¼ˆBan Expiresï¼‰

#### 5. ç”¨æˆ·æ“ä½œ
- æŸ¥çœ‹è¯¦æƒ…
- ç¼–è¾‘è§’è‰²
- å°ç¦ç”¨æˆ·
- è§£å°ç”¨æˆ·
- åˆ é™¤ç”¨æˆ·ï¼ˆå¦‚æœå¯ç”¨ï¼‰

---

## ğŸ¯ å¸¸ç”¨å¼€å‘æ¨¡å¼

### æ¨¡å¼ 1: Server Actions + Client Components

```typescript
// src/actions/posts.ts
'use server';

export async function getPosts() {
  const db = await getDb();
  return await db.query.posts.findMany();
}

export async function createPost(data: PostInput) {
  const db = await getDb();
  return await db.insert(posts).values(data);
}

// src/components/posts-list.tsx
'use client';

import { getPosts } from '@/actions/posts';
import { useQuery } from '@tanstack/react-query';

export function PostsList() {
  const { data } = useQuery({
    queryKey: ['posts'],
    queryFn: getPosts,
  });

  return <div>{/* æ¸²æŸ“åˆ—è¡¨ */}</div>;
}
```

### æ¨¡å¼ 2: React Hook Form + Zod

```typescript
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';

const schema = z.object({
  name: z.string().min(2),
  email: z.string().email(),
});

export function MyForm() {
  const form = useForm({
    resolver: zodResolver(schema),
  });

  return <form>{/* è¡¨å•å­—æ®µ */}</form>;
}
```

### æ¨¡å¼ 3: ä½¿ç”¨ Hooks

é¡¹ç›®æä¾›äº†å¾ˆå¤šè‡ªå®šä¹‰ Hooksï¼š

```typescript
// ç”¨æˆ·ç›¸å…³
import { useAuth } from '@/hooks/use-auth';
import { useUsers } from '@/hooks/use-users';

// æ”¯ä»˜ç›¸å…³
import { useSubscription } from '@/hooks/use-subscription';
import { useCredits } from '@/hooks/use-credits';

// UI ç›¸å…³
import { useToast } from '@/hooks/use-toast';
import { useMediaQuery } from '@/hooks/use-media-query';
```

---

## ğŸ› ï¸ å¼€å‘å·¥å…·å’Œå‘½ä»¤

### å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ‰“å¼€æ•°æ®åº“ç®¡ç†ç•Œé¢
pnpm db:studio

# æŸ¥çœ‹æ•°æ®åº“
# è®¿é—® https://local.drizzle.studio

# ä»£ç æ£€æŸ¥
pnpm lint

# ä»£ç æ ¼å¼åŒ–
pnpm format
```

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹ Server Actions æ—¥å¿—**
   - åœ¨ Server Actions ä¸­ä½¿ç”¨ `console.log`
   - æ—¥å¿—ä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯ï¼ˆä¸æ˜¯æµè§ˆå™¨æ§åˆ¶å°ï¼‰

2. **æŸ¥çœ‹æ•°æ®åº“æŸ¥è¯¢**
   - ä½¿ç”¨ Drizzle Studio: `pnpm db:studio`
   - ç›´æ¥æŸ¥è¯¢æ•°æ®åº“: `psql $DATABASE_URL`

3. **React Query Devtools**
   - å·²é›†æˆåœ¨å¼€å‘ç¯å¢ƒ
   - æŸ¥çœ‹æ‰€æœ‰æŸ¥è¯¢çŠ¶æ€å’Œç¼“å­˜

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[æœ€å°åŒ–é…ç½®æŒ‡å—](./æœ€å°åŒ–é…ç½®æŒ‡å—.md)** - ç¯å¢ƒé…ç½®
- **[Google OAuth é…ç½®](./Google-OAuth-é…ç½®æŒ‡å—.md)** - OAuth è®¾ç½®
- **[å¼€å‘æµç¨‹](./å¼€å‘æµç¨‹.md)** - å¼€å‘è§„èŒƒ
- **[å¸¸ç”¨å‘½ä»¤](./å¸¸ç”¨å‘½ä»¤.md)** - å‘½ä»¤å‚è€ƒ

---

## ğŸ’¡ å¿«é€Ÿå¼€å§‹å»ºè®®

### å¯¹äºæ–°æ‰‹å¼€å‘è€…

1. **å…ˆç†Ÿæ‚‰ç°æœ‰é¡µé¢**
   - æµè§ˆ `/dashboard` - ç”¨æˆ·ä»ªè¡¨æ¿
   - æµè§ˆ `/settings/*` - å„ç§è®¾ç½®é¡µé¢
   - æµè§ˆ `/admin/users` - ç®¡ç†å‘˜ç•Œé¢

2. **å­¦ä¹ ç»„ä»¶ä½¿ç”¨**
   - æŸ¥çœ‹ `src/components/ui/` ä¸­çš„åŸºç¡€ç»„ä»¶
   - å‚è€ƒç°æœ‰é¡µé¢çš„ä»£ç 
   - å¤åˆ¶ç²˜è´´å¹¶ä¿®æ”¹

3. **ä»ç®€å•åŠŸèƒ½å¼€å§‹**
   - æ·»åŠ ä¸€ä¸ªæ–°çš„è®¾ç½®é¡µé¢
   - ä¿®æ”¹ç°æœ‰é¡µé¢çš„æ ·å¼
   - æ·»åŠ ä¸€ä¸ªæ–°çš„ç»Ÿè®¡å¡ç‰‡

### å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…

1. **ç›´æ¥åˆ›å»ºæ–°åŠŸèƒ½**
   - å‚è€ƒ `admin/users` çš„å®ç°
   - ä½¿ç”¨ DataTable ç»„ä»¶å¿«é€Ÿæ„å»ºåˆ—è¡¨é¡µ
   - ä½¿ç”¨ Server Actions å¤„ç†æ•°æ®

2. **æ‰©å±•ç°æœ‰åŠŸèƒ½**
   - æ·»åŠ æ–°çš„è¿‡æ»¤æ¡ä»¶
   - æ·»åŠ æ‰¹é‡æ“ä½œ
   - ä¼˜åŒ–æ€§èƒ½

---

**å‡†å¤‡å¥½å¼€å§‹å¼€å‘äº†å—ï¼ŸğŸš€**

é€‰æ‹©ä¸€ä¸ªåœºæ™¯ï¼Œå¼€å§‹ä½ çš„ç¬¬ä¸€ä¸ªåŠŸèƒ½å¼€å‘ï¼

**æœ€åæ›´æ–°**: 2025-11-24
