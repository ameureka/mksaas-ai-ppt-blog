# 📊 项目图表和流程图集合

本目录包含 mk-saas-blog 项目的所有关键图表，包括系统架构、业务流程和页面布局。

所有图表均使用 **ASCII 格式** 编写，便于版本控制和快速查阅。

---

## 📑 图表导航

### 一、系统架构类 (Architecture)

#### 1. [整体五层架构](./architecture/1-整体五层架构.md)
- **用途**: 理解项目的整体分层架构
- **包含内容**:
  - 用户界面层 (UI)
  - React 组件层
  - Server Actions & API 层
  - 服务层
  - 数据库层
- **适用场景**: 新人入职、系统设计、技术评审
- **预计阅读时间**: 15-20 分钟

#### 2. [数据库关系图](./architecture/2-数据库关系图.md)
- **用途**: 理解数据模型和表关系
- **包含内容**:
  - user (用户表)
  - session (会话表)
  - account (OAuth 账户表)
  - payment (支付表)
  - userCredit & creditTransaction (积分表)
  - ER 图
  - 索引策略
  - 事务处理
- **适用场景**: 数据库开发、迁移规划、查询优化
- **预计阅读时间**: 20-25 分钟

#### 3-4. [认证与支付系统架构](./architecture/3-4-认证与支付系统架构.md)
- **用途**: 深入理解认证和支付流程
- **包含内容**:
  - Better Auth 配置和客户端
  - OAuth 集成 (Google, GitHub)
  - Stripe 支付流程
  - Webhook 处理
  - Server Actions 实现
- **适用场景**: 认证和支付功能开发、集成第三方服务
- **预计阅读时间**: 25-30 分钟

---

### 二、流程图类 (Flows)

#### 5-6. [用户认证与注册流程](./flows/5-用户认证与注册流程.md)
- **用途**: 理解用户注册和登录的完整流程
- **包含内容**:
  - 邮箱/密码注册完整步骤
  - 邮件验证流程
  - 邮箱/密码登录
  - OAuth 登录 (Google/GitHub)
  - 错误处理
- **适用场景**: 认证功能开发、用户流程优化、问题排查
- **预计阅读时间**: 20-25 分钟

#### 7-8-9. [支付、积分、权限流程](./flows/7-8-9-支付积分权限流程.md)
- **用途**: 理解支付、积分和权限管理流程
- **包含内容**:
  - 支付订阅完整流程 (Stripe Checkout)
  - 积分生命周期 (赠送、消费、过期)
  - Webhook 事件处理
  - 用户权限检查三层模型
  - 功能级权限控制
- **适用场景**: 支付功能开发、积分系统维护、权限审计
- **预计阅读时间**: 25-30 分钟

---

### 三、页面布局类 (Pages)

#### 10-11. [营销页面与认证页面布局](./pages/10-营销与认证页面布局.md)
- **用途**: 理解营销和认证页面的UI结构
- **包含内容**:
  - 首页 (/) 完整布局
  - 登录页面 (/auth/login)
  - 注册页面 (/auth/register)
  - 忘记密码页面
  - 重置密码页面
  - 邮箱验证页面
- **适用场景**: 前端开发、UI 改进、响应式设计
- **预计阅读时间**: 15-20 分钟

#### 12-13-14. [用户仪表板、设置与管理页面](./pages/12-13-14-用户仪表板与设置管理页面.md)
- **用途**: 理解用户仪表板和管理界面的布局
- **包含内容**:
  - 用户仪表板 (/dashboard)
  - 个人资料设置 (/settings/profile)
  - 账单管理 (/settings/billing)
  - 积分管理 (/settings/credits)
  - 安全设置 (/settings/security)
  - 管理员用户列表 (/admin/users)
- **适用场景**: 功能开发、UX 设计、后台功能实现
- **预计阅读时间**: 25-30 分钟

#### 15. [博客列表与文章详情页布局](./pages/15-博客列表与文章详情页布局.md)
- **用途**: 理解博客系统的页面结构
- **包含内容**:
  - 博客列表页 (/blog)
  - 分类过滤和搜索
  - 文章详情页 (/blog/[slug])
  - 目录导航
  - 相关推荐
  - 评论系统
  - MDX 内容渲染
- **适用场景**: 博客功能开发、内容管理、MDX 组件定制
- **预计阅读时间**: 20-25 分钟

---

## 🎯 快速查询指南

### 我想了解...

| 需求 | 参考文档 |
|------|---------|
| 项目整体架构 | [整体五层架构](./architecture/1-整体五层架构.md) |
| 数据库设计 | [数据库关系图](./architecture/2-数据库关系图.md) |
| 用户认证流程 | [认证与注册流程](./flows/5-用户认证与注册流程.md) |
| 支付系统工作原理 | [支付、积分、权限流程](./flows/7-8-9-支付积分权限流程.md) |
| 积分系统如何运作 | [支付、积分、权限流程](./flows/7-8-9-支付积分权限流程.md) |
| 权限检查机制 | [支付、积分、权限流程](./flows/7-8-9-支付积分权限流程.md) |
| 首页布局 | [营销页面布局](./pages/10-营销与认证页面布局.md) |
| 用户仪表板设计 | [用户仪表板布局](./pages/12-13-14-用户仪表板与设置管理页面.md) |
| 登录流程 | [认证与注册流程](./flows/5-用户认证与注册流程.md) |
| 博客系统结构 | [博客布局](./pages/15-博客列表与文章详情页布局.md) |

---

## 📊 图表统计

```
总图表数量: 15 个主要文档 (16 个逻辑图表)

分类统计:
├─ 架构图:         4 个
├─ 流程图:         3 个
└─ 页面布局:       6 个

总内容量:        ~50,000 字
总行数:          ~3,500 行 ASCII
预计总阅读时间:   3-4 小时
```

---

## 🔍 图表质量指标

所有图表均满足以下标准:

- ✅ **完整性**: 涵盖所有关键组件和流程
- ✅ **准确性**: 基于实际代码实现
- ✅ **可读性**: 清晰的 ASCII 格式
- ✅ **易维护性**: 纯文本格式，版本控制友好
- ✅ **可导出性**: 可转换为其他格式 (PNG, SVG, PDF)

---

## 💡 使用建议

### 1. 新人入职 (2-3 小时)
**推荐顺序**:
1. 整体五层架构 (10 分钟)
2. 数据库关系图 (15 分钟)
3. 用户认证与注册流程 (20 分钟)
4. 支付、积分、权限流程 (20 分钟)
5. 营销与认证页面布局 (15 分钟)
6. 用户仪表板布局 (20 分钟)

**预计时间**: 100 分钟 (1.5-2 小时)

### 2. 认证功能开发 (1-1.5 小时)
1. Better Auth 配置详解 (在 3-4 文档中)
2. 用户认证与注册流程 (完整阅读)
3. 认证页面布局 (UI 参考)

### 3. 支付功能开发 (1.5-2 小时)
1. Stripe 支付系统架构 (在 3-4 文档中)
2. 支付流程详解 (在 7-8-9 文档中)
3. 账单管理页面布局

### 4. 积分系统维护 (1 小时)
1. 积分生命周期流程 (在 7-8-9 文档中)
2. 数据库设计 (creditTransaction 部分)
3. 积分管理页面布局

---

## 🔗 关联文档

这些图表是以下文档的补充材料:

- [CLAUDE.md](../../CLAUDE.md) - 项目整体说明
- [CHECKPOINT.md](../../CHECKPOINT.md) - 文档项目进度报告
- `/docs/diagrams/` - 所有图表集合 (本目录)
- `/docs/0-快速开始/` - 快速开始指南 (待编写)
- `/docs/1-架构与设计/` - 详细架构文档 (待编写)

---

## 📝 图表维护

### 如何更新图表

当项目代码发生变化时，请更新对应的图表:

1. **架构图**: 当添加新的 service/lib 或修改分层时
2. **流程图**: 当修改业务流程或 API 调用时
3. **页面布局**: 当 UI 组件或页面结构发生变化时
4. **数据库图**: 当添加新表或修改表结构时

### 更新步骤

1. 在对应的 `.md` 文件中编辑 ASCII 图表
2. 保持图表的清晰和一致性
3. 更新关联的描述和说明
4. Git commit: `docs: update [diagram-name]`

---

## 🚀 下一步

计划中的增强项目:

- [ ] 生成对应的 PNG/SVG 版本 (通过 Kroki)
- [ ] 添加交互式 HTML 版本
- [ ] 创建视频演示讲解
- [ ] 添加更多实现细节的微观图表
- [ ] 国际化多语言版本

---

**最后更新**: 2025-11-18
**维护者**: AI Assistant
**反馈和建议**: 欢迎提出问题或改进建议
