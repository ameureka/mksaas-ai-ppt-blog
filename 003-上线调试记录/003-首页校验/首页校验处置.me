以下是针对这四个文件的联合校验摘要：

  📊 校验核心结论
  报告一致指出：数据库结构已就绪，但"内容资源"（图片/文件）存在严重缺失，且前端配置尚未适配真实数据源。


  ┌───────────────────────────┬────────────────────────────────────────────────────────────────────────────────────────┬───────────┐
  │ 文件名                    │ 核心发现 / 校验点                                                                      │ 状态      │
  ├───────────────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────┤
  │ 09-首页现状分析报告.md    │ 逻辑断层：首页仍用 Mock，交互旧（下载未跳详情页）；后端 Action 缺 tags/language 映射。 │ ✅ 有效   │
  │ 10-首页完整性评估报告.md  │ 资源阻断：所有 PPT 下载链接 (file_url) 均为 404；仅 15% 数据有图片；域名白名单缺失。   │ 🔴 严重   │
  │ UI可视化完整性条件校验.md │ 字段缺失：数据库缺 description 和 file_size，前端需做空值兼容；占位图路径错误。        │ ⚠️ 需修复 │
  │ database-review.md        │ 底层就绪：ppt 表索引完善，68 条数据状态良好 (published)，无需 Seed 数据。              │ ✅ 就绪   │
  └───────────────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────┘


  🛑 当前阻断项 (Blockers)
  根据报告，若不解决以下问题，直接上线将导致严重的 UI/UX 灾难：
   1. 文件 404：R2 存储桶中无 PPT 文件，下载功能 100% 不可用。
   2. 域名未授权：aippt.guochunlin.com 未加入 next.config.ts，会导致图片加载失败。
   3. 占位图路径错：代码引用的 /placeholder.svg 实际位于 /svg/placeholder.svg。

  ---

  🛠️ 建议执行的修复路径 (Next Steps)

  如果您准备解决报告中提到的问题，建议按以下优先级操作。请告诉我您希望从哪一步开始？

  阶段一：配置与资源修复 (P0 - 快速修复)
   1. [Config] 修改 next.config.ts，添加 aippt.guochunlin.com 到白名单。
   2. [Assets] 修复代码中的占位图引用路径 (指向 /svg/placeholder.svg)。
   3. [Utils] 创建 src/lib/constants/ppt.ts，同步数据库中的分类 Slug。

  阶段二：后端逻辑重构 (P1 - 核心工作)
   1. [DB] 重写 src/actions/ppt/ppt.ts，接入 Drizzle ORM 查询真实数据。
   2. [API] 修复 src/app/api/ppts/route.ts，正确透传 language 和 sort 参数。

  阶段三：前端交互升级 (P2 - 体验优化)
   1. [UI] 改造首页 PPT 卡片，点击跳转至 /ppt/[id] 详情页。
   2. [UI] 对 description 和 file_size 字段做前端空值兼容。

> 我们针对以上做具体的探讨与修改的修复的处理

  Responding with gemini-3-pro-preview
✦ 好的，我们现在开始分阶段执行修复计划。我们将首先解决 P0 级（阻断性） 的配置和资源问题，为后续接入真实数据打好基础。

  🚀 第一阶段：基础配置与资源修复

  这一步的目标是消除“裂图”风险，并建立前后端统一的常量标准。

  1. 修正 Next.js 图片域名白名单
  我们需要将数据库中使用的图片域名 aippt.guochunlin.com 加入白名单，否则 Next.js 的 <Image> 组件会报错。

  2. 建立统一常量文件
  创建 src/lib/constants/ppt.ts，确保前端的分类筛选器与数据库中的真实数据 (business, technology 等) 完全对应。

  3. 修复占位图路径
  修正代码中错误的 /placeholder.svg 引用，指向正确的 /svg/placeholder.svg。

  ---

  我将开始执行这些更改。
根据之前对 09-首页现状分析报告.md、10-首页完整性评估报告.md、首页pages以及ui可视化完整性条件校验.md 和 database-review.md 这四份报告的分析，我为您梳理了以下详细的修复建议。这些建议按优先级排序，旨在确保系统在“去 Mock 化”后能平稳运行。

  ---

  1. 配置与资源修复建议 (P0 - 必须解决的阻断项)

  问题核心：如果不修复这些，网站将出现大量的“裂图”，且下载功能 100% 不可用，用户体验会完全崩溃。

   * 建议 1.1：添加图片域名白名单
       * 现状：数据库中的图片大多来自 aippt.guochunlin.com，但 next.config.ts 的 images.remotePatterns 中没有配置该域名。
       * 建议：手动编辑 next.config.ts，添加如下配置：

   1         {
   2           protocol: 'https',
   3           hostname: 'aippt.guochunlin.com',
   4         },
       * 理由：防止 Next.js 的 <Image> 组件因安全策略拦截图片加载。

   * 建议 1.2：修正占位图路径
       * 现状：代码中大量硬编码引用了 /placeholder.svg，但实际文件位于 /public/svg/placeholder.svg。
       * 建议：进行全局搜索替换，将所有 /placeholder.svg 改为 /svg/placeholder.svg。
       * 理由：确保当真实图片加载失败（或不存在）时，用户看到的是正常的占位图，而不是一个破碎的图标。

   * 建议 1.3：定义统一常量
       * 现状：前端筛选用的分类 Slug（如 business）散落在各个组件中，没有与数据库中的真实 Slug 建立强约束。
       * 建议：创建 src/lib/constants/ppt.ts，定义 PPT_CATEGORIES、PPT_SORTS 和 PPT_LANGUAGES。
       * 理由：确保前端发起的请求参数（如 ?category=business）能被后端准确识别并匹配数据库记录。

  ---

  2. 后端逻辑重构建议 (P1 - 核心业务逻辑)

  问题核心：目前的后端接口大多是“空壳”或 Mock 实现，无法响应真实的前端筛选请求。

   * 建议 2.1：重构 Server Action (`getPPTs`)
       * 现状：src/actions/ppt/ppt.ts 是 Mock 数据，未连接数据库。
       * 建议：
           1. 引入 drizzle-orm 和数据库 schema。
           2. 实现基于 search（标题模糊搜索）、category（精确匹配）、language（精确匹配）和 sort（排序）的动态查询。
           3. 特别注意：映射数据库的 tags (text[]) 字段到前端 DTO。
           4. 特别注意：处理数据库中缺失的 description 字段（可返回空串或由标题生成摘要）。

   * 建议 2.2：修复 API 路由透传
       * 现状：src/app/api/ppts/route.ts 没有正确解析 URL 参数传递给 Server Action。
       * 建议：修改 Route Handler，从 request.nextUrl.searchParams 中提取所有过滤参数，并透传给 getPPTs。

  ---

  3. 前端交互优化建议 (P2 - 体验与完整性)

  问题核心：现有交互逻辑（如直接下载）在没有真实文件支持的情况下是行不通的，需要引导用户进入详情页。

   * 建议 3.1：统一跳转详情页
       * 现状：首页列表的“下载”按钮尝试直接触发下载，但目前文件链接全是 404。
       * 建议：修改 PPTCard 组件，将点击卡片本身、点击标题、点击下载按钮的行为统一改为跳转至 `/ppt/[id]` 详情页。
       * 理由：在详情页可以展示更多信息，并给出“资源整理中”或类似的提示，避免用户在列表页直接遭遇 404 错误。

   * 建议 3.2：前端空值处理
       * 现状：数据库缺少 file_size 和 description，前端组件可能直接渲染 undefined。
       * 建议：在 PPTCard 和详情页组件中，增加对这些字段的空值检查（例如：如果 file_size 为空，则不显示文件大小标签）。

  ---

  4. 长期数据治理建议 (P3 - 可持续性)

   * 建议 4.1：资源补全
       * 现状：R2 存储桶中没有实际的 PPTX 文件。
       * 建议：安排运营人员或脚本，将真实的 PPT 文件上传至对象存储，并更新数据库的 file_url 字段。

   * 建议 4.2：缩略图生成
       * 现状：只有 15% 的数据有图片。
       * 建议：为剩余的数据生成封面图和缩略图，提升首页的视觉填充率。

  ---

  总结：

  目前的当务之急是执行 P0（配置修正） 和 P1（后端重构）。
  如果不修复 P0，页面全是裂图；如果不修复 P1，筛选功能无效。

