博客 SEO 设计方案讨论
1. Frontmatter 字段设计与数据库管理
当前 schema 定义的必填字段：

// source.config.ts 中的 blog schema
schema: frontmatterSchema.extend({
  image: z.string(),           // 封面图
  date: z.string().date(),     // 发布日期
  published: z.boolean(),      // 是否发布
  premium: z.boolean().optional(), // 付费内容标记
  categories: z.array(z.string()), // 分类数组
  author: z.string(),          // 作者引用
})
关于是否纳入数据库管理的思考：

| 方案 | 优点 | 缺点 | |------|------|------| | 纯 MDX 文件 (当前) | 简单、Git 版本控制、部署即发布 | 内部链接需手动维护、无法动态查询 | | MDX + 数据库索引 | 支持内部链接、分类统计、相关文章推荐 | 需要同步机制、增加复杂度 | | 全数据库管理 | 完全动态、支持 CMS 编辑 | 失去 MDX 的灵活性、需要编辑器 |

我的建议：采用混合方案 - MDX 作为内容源 + 数据库索引

博客内容仍以 MDX 文件为主（保持 Git 版本控制）
构建时生成索引到数据库（slug、title、categories、internal_links）
支持内部链接跳转和相关文章推荐
2. 图片规范确认
你提到的规范：

封面图：1200x630 < 200KB
内容图：800-1000 宽 < 150KB
这个规范是合理的，符合：

Open Graph 标准（1200x630 是 OG 图片推荐尺寸）
网页性能最佳实践
当前 mk-saas 的图片使用模式
3. 博客主页设计（分类、标签、分页）
当前项目已有的组件：

blog-category-filter.tsx - 分类筛选
blog-category-list-desktop.tsx / blog-category-list-mobile.tsx - 分类列表
blog-grid-with-pagination.tsx - 带分页的博客网格
与 ai-site 整合迁移的考虑：

分类系统：当前使用 content/category/*.mdx 定义分类
标签系统：当前 schema 没有 tags 字段，可能需要扩展
分页：已有组件支持
4. 图片资源生成方案
你提到使用 Gemini/Banana 生成图片，这是个好想法。可以考虑：

构建时自动生成封面图（基于标题/描述）
使用 AI 生成符合规范的 OG 图片
存储到 R2/S3
下一步建议
你想要我为这个博客 SEO 优化项目创建一个正式的 spec 吗？我们可以系统化地规划：

博客内容管理增强 - MDX + 数据库索引方案
内部链接系统 - 支持文章间跳转
图片资源管理 - AI 生成 + 规范化存储
分类/标签系统增强 - 支持多维度筛选
与 ai-site 整合 - 迁移策略
好的，让我直接和你讨论这些问题：

博客 SEO 设计方案讨论
基于你提出的问题，我来逐一分析：

1. Frontmatter 字段与数据库管理
当前 schema 已定义的字段：

title, description (来自 frontmatterSchema)
image, date, published, categories, author, premium
关于数据库管理的建议：

我推荐 MDX + 数据库索引 的混合方案：

MDX 文件保持为内容源（Git 版本控制、易于编辑）
构建时/运行时生成索引到数据库
数据库存储：slug、内部链接关系、阅读统计、相关文章
这样可以支持：

内部链接跳转（通过 slug 查询）
相关文章推荐
分类/标签统计
阅读量追踪
2. 图片规范
你提到的规范是合理的 mk-saas 标准：

封面图 1200x630 < 200KB（符合 OG 标准）
内容图 800-1000 宽 < 150KB
3. 博客主页设计
当前项目已有分类筛选和分页组件，整合迁移时需要考虑：

是否需要增加 tags 字段（更细粒度的标签）
分页策略（每页多少篇）
搜索功能增强
4. 图片 AI 生成
使用 Gemini/Imagen 生成封面图是个好方案，可以：

基于文章标题/描述自动生成
统一风格和尺寸
存储到 R2/S3

这是一个 PPT 下载站的博客 SEO 优化项目，主要目标是：

为 AdSense 申请准备高质量的博客内容
建立完整的博客系统，支持 SEO/GEO 优化
将来可以无缝迁移到 mk-saas 平台
2. 已有内容资产
约 100 篇 PPT 相关博客文章（中文 MDX 格式），分布在 8 个分类目录下：

通用与混合场景（24 篇）
商务汇报 PPT（9 篇）
年终总结 PPT（10 篇）
项目提案 PPT（7 篇）
教育培训与课件 PPT（11 篇）
产品营销与营销方案 PPT（10 篇）
述职报告 PPT（10 篇）
付费模板搜索与产品视角（19 篇）
完整的索引系统：ppt-blog-index.ts 维护了文件路径到分类和标签的映射

3. 技术规范
MDX 格式，支持 Fumadocs 管线
Frontmatter 必填字段：title, description, image, date, published, categories, author
多语言支持：*.mdx（英文）/ *.zh.mdx（中文）
图片规范：封面 1200x630 < 200KB，内容图 800-1000 宽 < 150KB
4. 待完成工作
合规页面（About/Contact/Privacy Policy）部署
博客文章从备份目录迁移到正式 content/blog 目录
图片资源落地
英文版本翻译
AdSense 集成

设计文档已创建完成，包含以下核心内容：

架构设计：

MDX + 数据库索引的混合架构
新增 blog_index 和 blog_tag 数据库表
AI 图片生成服务（支持 Gemini/Imagen）
内部链接解析器
组件接口：

BlogIndexer - 博客索引同步服务
InternalLinkParser - 内部链接解析器
ImageGenerator - AI 图片生成服务
BlogQueryService - 博客查询服务
BlogMigrator - 迁移工具
Frontmatter 扩展字段：

tags - 细粒度标签数组
relatedPosts - 手动指定相关文章
seoKeywords - SEO 关键词
24 个正确性属性 覆盖所有核心功能

 运行内容构建: pnpm content (这将验证 MDX Frontmatter 和 Schema)。

## 5. 差距分析与完善计划 (2025-12-02 更新)

经过对现有代码库的分析，目前实现与设计目标主要存在以下差距，需分阶段完善：

### 5.1 核心差距分析

1.  **缺少数据库索引（Hybrid 架构）**
    *   **现状**：目前博客完全依赖文件系统（MDX + Fumadocs），无法高效实现复杂的动态查询。
    *   **缺失**：无法支持“相关文章推荐”、“热门文章统计”以及基于多维度的复杂筛选（如同时按分类和标签筛选）。
    *   **目标**：落实 MDX + 数据库索引的混合架构。

2.  **缺少 Tags（标签）系统**
    *   **现状**：`source.config.ts` 和 MDX Frontmatter 中仅定义了 `categories`（分类）。
    *   **缺失**：缺少更细粒度的 `tags` 字段，限制了内容的交叉索引能力。
    *   **目标**：在 Schema 中扩展 `tags` 字段。

3.  **缺少相关文章（Related Posts）机制**
    *   **现状**：详情页仅展示当前文章，无延伸阅读路径。
    *   **缺失**：没有基于内容或标签匹配的推荐算法。
    *   **目标**：实现基于 Tags 匹配的自动推荐系统。

### 5.2 实施路线图

#### 第一阶段：基础设施升级 (High Priority)
- [ ] **配置扩展**：修改 `source.config.ts`，为 Blog Schema 增加 `tags` (array) 和 `relatedPosts` (array, optional) 字段。
- [ ] **数据库设计**：在 `src/db/schema.ts` 中新增 `blog_post` 表，用于存储博客元数据索引（Slug, Title, Tags, Categories, PublishedDate 等）。

#### 第二阶段：数据同步与逻辑
- [ ] **索引同步工具**：开发 Server Action 或脚本，在构建或运行时将 MDX 元数据同步写入 `blog_post` 表。
- [ ] **关联查询逻辑**：实现基于 Tags 的相似度查询算法，用于获取“相关文章”。

#### 第三阶段：UI 增强与体验
- [ ] **标签展示**：在博客列表页和详情页增加 Tags 的 UI 展示。
- [ ] **推荐模块**：在博客详情页底部增加“相关文章”推荐卡片。

