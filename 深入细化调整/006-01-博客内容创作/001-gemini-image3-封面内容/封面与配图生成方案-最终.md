# Gemini Image3 封面与配图生成方案（最终版）

> 更新时间：2025-12-02
> 状态：✅ 已实现

---

## 一、方案概览

| 项目 | 说明 |
|------|------|
| 目标 | 为 100 篇博文生成内容强关联的配套图片 |
| 工具 | Gemini 网页/客户端（手工复制粘贴，无 API） |
| 产出 | 491 张图片（100 封面 + 391 内页） |
| 核心特点 | Prompt 与文章内容深度关联（Content-Aware） |
| 预计时间 | 17-20 小时 |

---

## 二、实现状态

### ✅ 已完成

| 模块 | 文件 | 说明 |
|------|------|------|
| 分类风格配置 | `config/category-styles.ts` | 8 个分类的风格、配色、元素 |
| Prompt 模板 | `config/prompt-templates.ts` | 封面/内页模板、场景类型判断 |
| 内容感知映射 | `config/prompt-templates.ts` | 35 条元素映射规则 |
| Prompt 生成脚本 | `scripts/image-pipeline/generate-prompts.ts` | 自动分析 MDX 生成 Prompt |
| 导出脚本 | `scripts/image-pipeline/export-pending.ts` | 导出待处理清单 |

### 📊 数据统计

| 指标 | 数值 |
|------|------|
| 文章总数 | 100 篇 |
| 封面图 | 100 张 |
| 内页图 | 391 张 |
| 分类数 | 8 个 |

### 📁 分类分布

| 分类 | 篇数 | 风格 | 配色 |
|------|------|------|------|
| 产品营销 | 10 | 高对比、渐变霓虹 | 粉/紫/青 |
| 模板技巧 | 18 | 现代、资源导向 | 紫/粉/青 |
| 商务汇报 | 10 | 极简网格、科技光影 | 深蓝/灰/白 |
| 年终总结 | 11 | 时间线+图表、稳重 | 暖橙/金/米 |
| 教育培训 | 11 | 明快、插画人物 | 绿/蓝/黄 |
| 述职报告 | 10 | 专业、成就导向 | 深灰/石墨/白 |
| 通用技巧 | 23 | 多功能、信息图 | 蓝/绿/黄 |
| 项目提案 | 7 | 创新、技术感 | 蓝/绿/白 |

---

## 三、文件命名与路径

| 类型 | 格式 | 尺寸 | 大小限制 |
|------|------|------|----------|
| 封面 | `{slug}-cover.jpg` | 1200×630 | <200KB |
| 内页 | `{slug}-{n}.png` | 1000×600 | <150KB |

**存储路径**：
- 本地：`public/images/blog/`
- CDN：`s3://bucket/public/images/blog/`

---

## 四、内容感知系统

### 4.1 场景类型判断

| 检测特征 | 图片类型 | 画面元素 |
|----------|----------|----------|
| 步骤、流程、第一步 | flow | 箭头、步骤卡片、数字标记 |
| vs、对比、区别 | compare | VS符号、左右对比、差异标注 |
| 数据、统计、百分比 | chart | 饼图、柱状图、趋势线 |
| 要点、清单、技巧 | cards | 卡片组、勾选标记、列表 |
| 案例、场景、演示 | scene | 人物插画、场景背景 |
| 其他 | concept | 抽象图形、概念可视化 |

### 4.2 内容感知元素映射（35 条规则）

| 类别 | 关键词 | 对应元素 |
|------|--------|----------|
| 品牌视觉 | Logo、品牌、配色、字体 | Logo图标、调色板、字体样式 |
| 数据图表 | 图表、数据、增长、趋势 | 饼图、趋势曲线、数据看板 |
| 人物角色 | 新人、主管、团队、用户 | 新人图标、管理者图标、团队图标 |
| 对比选择 | vs、对比、优劣 | VS符号、左右对比、对比表格 |
| 年终特有 | 年终、成长、证明、复盘 | 年度日历、成长曲线、证据图标 |
| 营销特有 | 卖点、转化、营销 | 营销漏斗、卖点标签、转化漏斗 |
| 教育特有 | 知识、练习、问题 | 知识图标、练习图标、问号图标 |

### 4.3 关键词提取（优先级排序）

| 优先级 | 关键词类型 | 示例 |
|--------|-----------|------|
| 高 (10) | 标题核心词 | vs、新人、主管、年终、营销 |
| 中 (5) | 内容核心词 | Logo、配色、图表、数据、成长 |
| 低 (3) | 通用词 | 用户、场景、案例、技巧 |

---

## 五、Prompt 模板

### 5.1 封面 Prompt

```
你是专业平面设计师，请生成 1200x630 的博客封面图。

【文章主题】{title}
【短标题】{shortTitle}
【关键词】{keywords}
【需渲染文字】{textToRender}
【风格】{styleHint}
【配色】{palette}
【画面元素】{sceneElements}

【设计要求】
- 标题文字居中或居左，字号大，对比度高，清晰可读
- 背景简洁，留白充足，便于阅读
- 风格符合 {category} 分类特点
- 无水印，无多余文字，高清输出
- 构图平衡，视觉焦点明确

【构图建议】
- 主体元素占画面 40-50%
- 文字区域留白 15-20%
- 整体简洁专业
```

### 5.2 内页 Prompt

```
生成 1000x600 的信息图/情景图。

【场景】{scene}
【类型】{sceneType}
【画面元素】{elements}
【风格】{styleHint}
【配色】{palette}

【要求】
- 清晰、简洁、无水印
- 文字极少（仅短标签）
- 适合博客正文插图
- 与封面风格一致
- 信息传达准确
```

---

## 六、使用指南

### 6.1 生成 Prompt

```bash
cd draft-code
npx tsx scripts/image-pipeline/generate-prompts.ts
npx tsx scripts/image-pipeline/export-pending.ts
```

### 6.2 输出文件

| 文件 | 说明 |
|------|------|
| `data/image-tasks.json` | 结构化任务数据 |
| `data/pending-prompts.md` | 待处理 Prompt 清单（可直接复制） |

### 6.3 手工生成流程

1. 打开 `pending-prompts.md`
2. 复制 Prompt 到 Gemini 网页
3. 生成图片 → 下载 → 按规则命名
4. 保存到 `generated-images/{category}/`

---

## 七、质量检查

| 检查项 | 封面 | 内页 |
|--------|------|------|
| 尺寸正确 | 1200×630 | 1000×600 |
| 文字清晰 | ✓ | 极少/无 |
| 风格符合分类 | ✓ | ✓ |
| 无水印 | ✓ | ✓ |
| 与同分类风格一致 | ✓ | ✓ |

---

## 八、文件结构

```
draft-code/
├── config/
│   ├── category-styles.ts      # 分类风格配置
│   └── prompt-templates.ts     # Prompt 模板 + 内容感知
├── scripts/
│   └── image-pipeline/
│       ├── generate-prompts.ts # Prompt 生成
│       └── export-pending.ts   # 导出清单
├── data/
│   ├── image-tasks.json        # 任务数据
│   └── pending-prompts.md      # 待处理清单
└── generated-images/           # 生成的图片
    ├── marketing/
    ├── business/
    ├── year-end/
    └── ...
```
