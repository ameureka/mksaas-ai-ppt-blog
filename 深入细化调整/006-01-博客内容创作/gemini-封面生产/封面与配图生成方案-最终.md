# Gemini Image3（Nanobanana）封面与配图生成综合方案

结合已有文档（`gemini-image3-补充设计.md`、`gemni-nanobanana-design.md`），在无 API、手工/半自动生成的前提下，给出可执行流程、提示词与文件管理规范。

## 目标与约束
- 目标：为 100 篇博文生成封面（含标题文字）+ ≥3 张情景化配图，尺寸/体积满足 SEO/性能；路径与 frontmatter 对齐，后续可镜像到 S3/CDN。
- 约束：无 API，仅能在 ChatGPT/Gemini 客户端手动提交；中文长标题文字渲染可能出错，需要策略规避。

## 文件命名与路径
- 封面：`/images/blog/{slug}-cover.jpg`，1200x630，<200KB，需包含标题或短关键词。
- 内页：`/images/blog/{slug}-{n}.png`（n 从 1），1000x600 或 800x450，<150KB。
- 头像（如需）：`/images/authors/{author}.jpg`，200x200。
- 上传：本地放 `public/images/blog|authors`，可镜像到 S3/CDN 同路径前缀；frontmatter/正文路径不变。

## 风格速查（按分类）
- 商务汇报/项目提案：深蓝/灰、极简网格、数据卡片/折线、科技光影。
- 年终总结/述职：暖色/中性、时间线+图表、稳重。
- 教育培训/培训课件：明快、高对比、插画人物、卡片分组。
- 产品营销/营销方案：高对比、大标题、渐变/霓虹、情境 mock。
- 通用/付费搜索：中性蓝灰、信息图；付费场景加“锁/徽章”。
- 配色/风格类：色板/对比示例/色号叠加。

## 中文文字渲染策略
- 方案 A（短词）：封面只渲染 2-6 字核心词（如“产品营销”“商务汇报”），避免长句乱码。
- 方案 B（英文主视觉）：渲染英文标题，中文用后期叠加或不写；适合英文版封面。
- 方案 C（留白占位）：要求“留出中间白板/标牌供后期加字”，生成无文字画面，后续用本地工具加字。

## Prompt 模板（手工复制到 Gemini）
**封面（含文字/或留白）**
```
你是专业平面设计师，请生成 1200x630 的博客封面图，风格 {style_hint}。
主题：{title}
关键词：{keywords}
需包含的文字：{text_to_render}  // 可用短中文或英文，或写“留出中央空白供叠字”
画面元素：{scene_elements}
颜色：{palette}
构图：简洁、可读性高，避免过度细节；背景干净以便叠字。
输出：无水印，无多余文字，高清。
```
- `text_to_render` 可选：短中文（如“产品营销”）或英文；若用留白，写明“留出中央白板”。

**内页（情景化配图）**
```
生成 1000x600 的信息图/情景图，风格 {style_hint}。
场景：{scene}  // 对应正文段落，如“市场分析流程示意”“15分钟汇报提纲”
画面元素：{elements}
颜色：{palette}
要求：清晰、简洁、无水印，文字极少（仅短标签），适合博客正文插图。
```
- 准备 3-4 个 `{scene}`，对应文章段落，方便 alt 文案。

## Prompt 自动生成（Content-Aware）
- 写一个“Prompt Extractor”脚本（Python/TS）：读取每篇 `.mdx` → 提取标题、分类、关键词、正文要点 → 输出 `image_tasks.md` 或 JSON：
  - `slug`, `title`, `category`, `style_hint`, `palette`, `scene_elements`
  - `cover_prompt`（含文字策略 A/B/C 选项）
  - `scenes` 数组（3-4 个情景化内页描述）
  - 状态：`cover_done`, `inline_done`, `uploaded`
- 生成后的 `image_tasks.md` 供人工复制到 Gemini。

## 手工流水（无 API）
1) 打开 `image_tasks.md`，逐篇复制封面 Prompt 到 Gemini（Nanobanana）生成 → 选满意结果 → 命名 `{slug}-cover.jpg`。
2) 复制 3-4 个内页 Prompt 分别生成 `{slug}-1.png` 等。
3) 压缩（TinyPNG/Squoosh）后放入 `public/images/blog/`，更新 `image_tasks.md` 的完成状态。
4) 在 MDX 中：
   - frontmatter `image` 指向 cover。
   - 正文插入/替换 `![alt](/images/blog/{slug}-n.png)`，alt 写清场景。
5) 同步到 S3/CDN（可用 `aws s3 cp --recursive public/images/blog s3://bucket/public/images/blog`），标记 `uploaded=Y`。
6) 跑 `pnpm blog:audit` 确认 `no_cover/few_images` 清零，`mediaStatus=done`。

## alt/SEO 要点
- 封面 alt：包含核心关键词 + 场景（如“产品营销PPT 封面，营销漏斗与数据看板”）。
- 内页 alt：描述具体画面和场景（如“市场分析饼图与放大镜示意”）。
- 统一配色/风格同一分类内保持一致，提升系列感。

## 占位与回填
- 若当下无法生成，放占位同名文件，`mediaStatus=partial`，后续替换无需改 MDX。

## 输出清单示例（image_tasks.md 行示例）
```
| slug | title | category | style_hint | palette | scenes | text_to_render | cover_done | inline_done | uploaded |
| ppt-category-complete-guide | 8大PPT分类完全指南 | tutorial | 明快+信息图 | 蓝紫渐变+白 | 商务汇报分类示意；教育培训色板；营销方案流程 | “PPT分类指南” 或 留白 | N | 0/3 | N |
```

## 后续可扩展
- 若文字渲染不稳：改用“留白+本地叠字”或英文主标题。
- 若批量生成需要：可将 Prompt Extractor 生成的命令块一次性复制 3-5 条给 Gemini，对话中逐张出图。***
