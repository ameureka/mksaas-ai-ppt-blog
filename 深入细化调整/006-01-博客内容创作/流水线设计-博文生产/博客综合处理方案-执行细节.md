 第一条：分类/结构/索引落地 – 执行细节

  - 数据盘点：先用脚本解析 广告-博文/ppt-blog-index.ts，输出去重后的分类、标签、文件列表，标记是否已有英文映射、是否在 content/category 中存在同名 slug。目标是确认没有漏映射或拼写差异。
  - 分类映射表（zh → slug）：固定一张表供审计/翻译/同步共用，例如：商务汇报→business，教育培训→education，培训课件→training，产品营销→marketing，营销方案→marketing-plan，年终总结→year-end，项目提案→proposal，述职报告→report，通用→general，付费与
    搜索→paid-search。落地为一个常量（如 scripts/blog-audit/category-map.ts），审计和翻译均引用。
  - frontmatter 扩展口径：tags: string[]、seoKeywords?: string[]、relatedPosts?: string[] 作为“宽松可选”字段；短期不改 source.config.ts，审计/同步脚本要容忍并校验格式但不阻断 pnpm content。若未来改 schema，先更新 source.config.ts 再跑 pnpm
    content。
  - 索引结构（JSON/DB）：建议统一形状，供脚本输出与后续 DB 同步：
      - blog_index: { slug, locale, title, description, date, categories, tags?, seoKeywords?, image, wordCount, heroImages: number, internalLinks: number, externalLinks: number, status: 'ok'|'needs_fix', mediaStatus: 'missing'|'partial'|'done',
        issues: string[] }
      - blog_tags: { slug, tag }
      - blog_media: { slug, cover: string|null, inlineImages: string[], generatorModel?: string }
      - 输出位置：reports/blog-audit.json（或拆分），脚本入口如 pnpm blog:audit -> node scripts/blog-audit/index.ts。
  - 校验规则口径：标题 25-35 中文字符≈50-60 英文字符；描述 70-100 中文字符≈140-160 英文字符；日期 YYYY-MM-DD；H2≥5、H3≥5；内链≥3、外链≥1；图片占位≥3；权威引用/统计各 ≥2；image 存在或占位；categories 按映射写 slug。
  - 落地顺序：
      1. 落一个 category-map.ts 常量 + 索引/审计输出接口定义。
      2. 写 blog-audit 脚本：解析 frontmatter、正文，按规则产出 reports/blog-audit.json（含 issues/stats）。
      3. 用审计结果检查分类/标签是否有未映射或缺失的 slug，再决定是否补 content/category/* 或调整映射。
      4. 确认扩展字段在现有文件里的占比与格式，决定是否批量补齐/清理。
  - 命令声明：文档中提到的 pnpm blog:audit/pnpm blog:sync 目前需新增脚本支持，不是现成命令；可先约定入口，再实现。

  如果没异议，我可以先起 category-map.ts + reports 输出结构定义，并草拟 blog-audit 的输入/输出示例，作为后续实现的基础。


  • 第二条：SEO/GEO 审核 – 执行细节

  - 规则固化（脚本可配置）
      - 标题长度：25-35 中文字符（≈50-60 英文字符）；描述：70-100 中文字符（≈140-160 英文字符）。
      - 首段关键词：正文首 100 字需包含 slug/关键词（可用 slug 拆词或 frontmatter seoKeywords 校验）。
      - 结构：H2≥5，H3≥5；FAQ 段落存在（检测 “FAQ/常见问题” 标题或列表）。
      - 链接：内链≥3（域内或以 / 开头），外链≥1（http/https 且非本站）。
      - 权威/GEO：权威引用≥2（含来源词如 “报告/研究/哈佛/McKinsey/Statista”等 + 引用格式），统计数据≥2（检测 % 或数字+“调查/报告”）。
      - 图片：≥3 个图（![]()），alt 不能为空；封面 image 字段存在或占位。
      - 字数：≥1200；日期：YYYY-MM-DD；categories/author 存在。
  - 审计脚本输出（示例）
      - reports/blog-audit.json 数组项：{ slug, locale, issues: ['short_title','no_cover','missing_en',...], stats: { wordCount, h2, h3, internalLinks, externalLinks, images, titleLen, descLen, quotes, statsCount }, frontmatter: { categories,
        author, date } }
      - 典型 issues 枚举：missing_description, short_title, long_title, short_desc, no_cover, few_images, no_internal_links, no_external_links, no_authoritative_quote, no_stats, few_h2, few_h3, no_faq, missing_en, bad_date, missing_category,
        missing_author.
  - 检测实现要点
      - 标题/描述长度按 UTF-8 字符计数（而非字节）。
      - 首段抽取：正文去掉 frontmatter 后取首段文本，检测关键词命中率或 slug 分词。
      - 内链/外链：正则区分 / 开头或本站域 vs http(s) 外链。
      - 权威引用：正则匹配关键字+引号/括号；统计匹配 \d+% 或 \d{2,}.*(报告|调查|研究).
      - FAQ：匹配 H2/H3 文本含 “FAQ/常见问题/问答” 或包含 Q/A 列表标识。
      - 图片 alt：解析 markdown image，检查方括号非空。
  - 使用方式
      - 运行：pnpm blog:audit（需新增脚本入口 node scripts/blog-audit/index.ts）。输出 reports/blog-audit.json 并可附 reports/blog-audit-summary.md（统计缺口数量）。
      - 结果用法：按 slug + issues 分配修复任务；修复后复跑确保 issues 清零/可接受。
  - 人为复核建议
      - 抽检：每类随机 2-3 篇，看语气、流畅度、引用可信度；对高风险 issue（无引用/无数据/无内链）优先修。
      - 长度边界：接近阈值的标题/描述建议人工确认是否自然。
  - 下一步
      - 实现 audit 脚本框架（读取 MDX → 解析 frontmatter/正文 → 产出 issues/stats）。
      - 跑一次全量，生成首版报告，圈出 top 3 常见缺口（预期：无封面、内链不足、缺权威引用/统计）。


• 第三条：批量修复正文/Frontmatter – 执行细节

  - 输入：reports/blog-audit.json（issues/stats）+ 原文档路径列表。
  - 修复优先级（按影响顺序）：
      1. frontmatter 缺失/格式（title/description/date/categories/author/image/published）；日期格式错误；
      2. 结构不足（H2/H3、字数、FAQ 缺失）；
      3. 链接/引用/统计不足（内链、外链、权威引用、数据）；
      4. 图片占位不足/alt 为空；
      5. 标题/描述长度不合规；缺英文版。
  - 修复方式：
      - 自动生成：对有模板的缺口（内链/引用/统计/FAQ/图片占位）可用 Prompt 半自动修正；对严重缺文可用 topics.json + Outline/正文 Prompt 重写。
      - 手工/批量脚本：标题/描述长度可脚本标注，人工润色；日期/字段缺失可脚本补默认值（如 image 占位 /images/blog/{slug}-cover.jpg）。
      - 扩展字段：根据需要补 tags/seoKeywords/relatedPosts，不改 schema 时保持可选。
  - 内链策略：
      - 按分类优先互链，同类“页数/结构/风格/改稿”互链；至少 3 个内部链接，格式 /blog/{slug}。
      - 可利用 ppt-blog-index.ts 生成同分类 slug 清单，随机/按相似标签插入。
  - 权威引用/统计：
      - 每篇插入 ≥2 条：权威来源（哈佛/麦肯锡/Statista/行业报告）+ ≥2 条数据（% 或数值），用 <Callout type="info"> 或正文引用，标注年份/来源。
  - FAQ 段落：
      - 末尾添加 H2/H3 “常见问题 / FAQ”，至少 3 问；若已有则补足数量和可读性。
  - 图片占位：
      - 确保 ![alt](/images/blog/{slug}-1.png) 至少 3 个，alt 说明具体内容；封面 image 字段指向 cover 命名。
  - 执行流程：
      1. 读取 audit 报告，按 issues 生成待修列表（CSV/JSON 便于分发）。
      2. 对“可模板化”缺口（无内链/无引用/无统计/无 FAQ/图片不足）批量用 Prompt 生成补丁段落，再手动审查。
      3. 对标题/描述/日期/封面缺失，脚本批量填充占位，再人工调整语感。
      4. 修完一批后复跑 pnpm blog:audit，确认 issues 收敛。
  - 输出/同步：
      - 更新后的 .zh.mdx 保存在原路径（或 staging），后续同步到 content/blog/。
      - 保持 广告-博文/ 作为备份，不覆盖原文件时可另存 _fixed 目录或直接就地修改（按团队约定）。
  - 工具/命令：
      - pnpm blog:audit → 报告；修复后复跑。
      - 可新增 scripts/blog-fix/ 里的小工具：补内链、补图片占位、补 frontmatter 占位（可选）。

• 第四条：多语言（英文版） – 执行细节

  - 覆盖范围：100 篇中文稿全部生成英文版，形成 {slug}.mdx 与 {slug}.zh.mdx 成对。
  - 分类映射：使用固定映射表写入英文 categories（如 商务汇报→business，教育培训→education，培训课件→training，产品营销→marketing，营销方案→marketing-plan，年终总结→year-end，项目提案→proposal，述职报告→report，通用→general，付费与搜索→paid-
    search）。审计脚本同步检查缺映射/错误映射。
  - 翻译准则：
      - 保留 frontmatter 键名；翻译 title、description 值，date/image/published/categories/author 保持或按映射填入英文 slug。
      - 组件结构不变（<Callout> 等），仅翻译标签内容。
      - 图片路径不变；内链保持 /blog/{slug}。
      - 语气：美式商务、简洁流畅。
  - 流程：
      1. 以修复后的中文稿为源，调用翻译 Prompt（prompt-templates.md Translation），生成英文 MDX。
      2. 生成的文件放在同目录、同 slug（无 .zh 后缀）。
      3. 审计脚本新增 missing_en issue，翻译完成后清除此标签；可简单检查英文文件存在性、frontmatter 完整性。
      4. 人工抽检：每分类 2-3 篇，检查语义、用词、标题/描述自然度。
  - 同步到正式目录：
      - 将中英文件落到 content/blog/，保持 slug 一致。
      - 索引记录语言覆盖状态：locales: ['zh','en'] 或 issues 标记缺少英语。
  - 命令/工具：
      - 暂无现成命令；可用脚本批量调用翻译模型或手工分批；完成后复跑 pnpm blog:audit 验证 missing_en 已消失。

  • 第五条：图片生成与落地 – 执行细节

  - 目标：每篇至少 4 张：1 封面 + ≥3 内页图；统一尺寸/命名/压缩，写入 public/images/blog/（通用插画可放 /images/content），并在索引标记完成状态。
  - 规格与命名：
      - 封面：1200x630 JPG，<200KB，路径 /images/blog/{slug}-cover.jpg。
      - 内页：1000x600（或 800x450）PNG/WebP，<150KB，路径 /images/blog/{slug}-1.png 等。
      - 头像（如需）：200x200 JPG /images/authors/{author}.jpg。
      - alt：占位时即写清内容（如 “商务汇报结构示意”）。
  - 生成工具：nanobanana 的 Geminid；分类风格策略：
      - 商务汇报/项目提案：深蓝/灰、极简、数据卡片/折线、科技光影。
      - 年终总结/述职：暖色/中性、时间线+图表、稳重。
      - 教育培训/培训课件：明快、插画式人物、卡片分组。
      - 产品营销/营销方案：高对比、大标题、渐变/霓虹、情境 mock。
      - 通用/付费搜索：中性蓝灰、信息图；付费场景可加“锁/徽章”元素。
      - 配色/风格类：色板/对比示例/色号叠加。
  - 流程：
      1. 依据 slug + 分类生成 prompt，批量调用 Geminid 生成封面+3 图。
      2. 压缩（TinyPNG/Squoosh/脚本）后落盘到 public/images/blog/。
      3. 更新文章 frontmatter image 指向 cover；正文图片占位替换为实际文件名；alt 与图意一致。
      4. 在索引中标记 mediaStatus: done，记录生成模型 generatorModel: geminid，并列出缺图为 missing/partial。
  - 占位策略：
      - 如未能即时生成，放占位文件（同路径命名），并在 issues 标 missing_media，后续替换。
  - 自动化口径：
      - 可准备一个 scripts/blog-media/ 小脚本，读取 slug 列表输出待生成 prompt/命名清单；执行后更新 blog_media JSON。
  - 验收：
      - 前端路径无 404，封面/内页尺寸合规；pnpm blog:audit 不再报 few_images/no_cover，mediaStatus=done。

    - 如果生产环境会走 CDN/S3（R2），建议把生成的图片同步到桶里，同时保留 public/images/blog 本地副本，确保构建预览可用。
  - 最简做法：保持路径不变（/images/blog/{slug}-*.jpg|png），在 S3 建同路径前缀 public/images/blog/，上线时用 CDN 直接回源；不需要改 frontmatter 的 image/正文路径。
  - 如需强制走外链，可将 image/正文里的路径替换成 CDN 域名（与 Next image 配置一致），但要统一替换策略以避免混用。
  - 若采用 Next 内置优化但使用外链，需要在 next.config.ts 的 images.domains 加上 CDN 域名；若禁用优化，设置 DISABLE_IMAGE_OPTIMIZATION=true。
  - 结论：优先保持本地路径 + S3 同步镜像；除非带域名的 CDN 强需求，否则不必改写路径。


• 第六条：分类视角的差异化风格与文案要点 – 执行细节

  - 视觉/风格分层（对应图片与文案语气）
      - 商务汇报/项目提案：深蓝/灰、极简网格、数据卡片/折线图，科技光影；文案强调决策支持、复盘、要点速览。
      - 年终总结/述职：暖色/中性，时间线+图表，沉稳；文案强调成绩/复盘/计划、可信证据链。
      - 教育培训/培训课件：明快、高对比、插画式人物、卡片分组；文案强调互动、易学、步骤化。
      - 产品营销/营销方案：高对比、大标题、渐变/霓虹、场景 mock；文案强调转化、A/B、亮点/钩子。
      - 通用/付费搜索：中性蓝灰、信息图；付费场景可加“锁/徽章/高亮价签”；文案强调检索效率、付费价值。
      - 配色/风格类：色板/对比示例/色号叠加；文案强调视觉体系、可复用模板。
  - 文案结构与内链策略
      - 标题/描述：含对应场景关键词（“商务汇报”“页数”“配色”“提案”“述职”“营销方案”等），保持长度合规。
      - 内链：优先同分类互链，其次跨分类的“页数/结构/改稿/风格”主题互链。
      - FAQ/CTA：按场景定制
          - 商务/提案：FAQ 围绕决策层关注、风险/ROI；CTA 引导下载模板或查看提案示例。
          - 年终/述职：FAQ 围绕证据链、数据来源；CTA 引导使用模板/填充清单。
          - 教育/培训：FAQ 围绕课前准备/互动页；CTA 引导课程模板合集。
          - 营销：FAQ 围绕转化、素材、复用；CTA 引导营销方案合集或案例。
          - 通用/搜索/付费：FAQ 围绕搜索技巧/付费价值；CTA 引导付费模板或关键词搜索指南。
  - 检查点（审计/修复时关注）
      - 文案语气与分类匹配（避免“营销”文案出现在“年终总结”类）。
      - 图片风格与分类一致；alt 描述呼应场景。
      - 内链指向同分类优先，避免无关跨链。
  - 落地操作
      - 在修复/图片生成时依据分类选择风格模板（封面/内页 prompt、用词）。
      - 审计报告可新增轻量校验：检测标题/描述包含分类核心词；图片 alt 含场景词。

• 第七条：结合现有方案与产出路径 – 执行细节

  - 参考文件对齐
      - 架构/流程：006-01-博客内容创作/博客内容创作设计方案.md、content-pipeline-design.md、prompt-templates.md。
      - 选题库（仅缺文再用）：topics.json。
      - 已有内容索引：广告-博文/ppt-blog-index.ts。
  - 正式落地路径
      - 内容：content/blog/{slug}.zh.mdx 与 {slug}.mdx（英文）；作者/分类按需要补 content/author|category。
      - 图片：public/images/blog|authors|content（本地 + 可同步 S3/CDN）。
      - 报告/索引：reports/blog-audit.json（审计输出），可在 scripts/blog-audit/ 下生成；索引 JSON/DB 同一结构（blog_index/blog_tags/blog_media）。
  - 命令链路（需新增脚本）
      - pnpm blog:audit → node scripts/blog-audit/index.ts（扫描+issues/stats 输出）。
      - pnpm blog:sync → node scripts/blog-sync/index.ts（将修复后的内容同步到 content/blog/ 并更新索引；保留 广告-博文/ 备份）。
      - pnpm content（已有）→ schema 校验；pnpm lint（格式/质量）；可选 pnpm build。
  - 执行顺序（落地建议）
      1. 定稿 category-map.ts + 审计输出 schema；搭建 scripts/blog-audit 框架。
      2. 跑首轮 pnpm blog:audit，生成缺口清单。
      3. 针对高频缺口批量修复（内链/引用/图片占位/FAQ），复跑审计。
      4. 翻译英文版，清除 missing_en。
      5. 生成并落地图片，mediaStatus 置为 done。
      6. pnpm content → pnpm lint（必要时 build），同步到正式 content/blog/。
  - 验收标准
      - 审计 issues 收敛（核心：无封面/无图片/无引用/无数据/内链不足/缺英文）。
      - 中英文件对齐，分类映射正确。
      - 图片路径无 404，前端加载正常；报告 mediaStatus=done。
      - pnpm content 通过；pnpm lint 通过（可选 build 通过）。

  若要开始实施，下一步可先新建 scripts/blog-audit/ 的接口定义与分类映射文件，再跑首轮审计。
