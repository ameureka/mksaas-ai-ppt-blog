# 新版封面生成说明（仅封面/可选内页）

## 1. 运行模式
- 默认只生成封面：`--mode=cover-only`
- 可选封面+内页：`--mode=cover-and-inline`（H2 场景提取，最多 3 张，过滤 FAQ/总结）

## 2. 步骤（建议）
```bash
# 进入 draft-code 目录
cd 002-迁移功能深入调整/006-01-博客内容创作/draft-code

# 仅生成封面清单
npx tsx scripts/image-pipeline/generate-prompts.ts --mode=cover-only
npx tsx scripts/image-pipeline/export-pending.ts
```

输出：`draft-code/data/image-tasks.json` / `image-tasks.md` / `pending-prompts.md`

## 3. 分类与路径
- 扫描目录：`content/blog`（仅中文）
- 分类映射：business / year-end / education / marketing / proposal / report / general / paid-search
- 封面命名：`{slug}-cover.jpg`（1200x630 <200KB），放入 `public/images/blog/`
- 内页（如启用）：`{slug}-{index}.png`（1000x600 <150KB）

## 4. 生成后动作
1) 按 `pending-prompts.md` 到 Gemini 生成封面；命名保存至 `public/images/blog/`。  
2) 需要压缩可先跑压缩脚本（如 `compress-images.sh`）。  
3) 跑缺图/校验脚本，确认缺失为 0。  
4) 运行 `pnpm content`（必要时 `pnpm build`）验证。  
5) AdSense 开关按环境变量控制，发布前检查 `ads.txt` 与 slot/ID。  

## 5. 注意
- slug 取文件名，不做翻译；分类优先 frontmatter.categories。  
- 仅中文路由，无 .zh/.en 输出。  
- 如只需封面，请保持 `cover-only`，避免生成多余内页任务。  
